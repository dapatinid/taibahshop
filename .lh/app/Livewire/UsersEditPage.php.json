{
    "sourceFile": "app/Livewire/UsersEditPage.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1733933994656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733934067150,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,16 @@\n \n namespace App\\Livewire;\n \n use App\\Models\\User;\n+use Illuminate\\Support\\Facades\\Hash;\n+use Jantinnerezo\\LivewireAlert\\LivewireAlert;\n+use Livewire\\Attributes\\Url;\n use Livewire\\Component;\n+use Vermaysha\\Wilayah\\Models\\City;\n+use Vermaysha\\Wilayah\\Models\\District;\n+use Vermaysha\\Wilayah\\Models\\Province;\n+use Vermaysha\\Wilayah\\Models\\Village;\n \n class UsersEditPage extends Component\n {\n     use LivewireAlert;\n@@ -96,7 +103,26 @@\n     }\n \n     public function render()\n     {\n-        return view('livewire.users-edit-page');\n+        $states = Province::all();\n+        $cities = City::all()->where('province_code', $this->state)->sortByDesc('name');\n+        $districts = District::all()->where('city_code', $this->city)->sortBy('name');\n+        $villages = Village::all()->where('district_code', $this->district)->sortBy('name');\n+        $kab = City::all()->sortByDesc('name');\n+        $kec = District::all()->sortBy('name');\n+        $desa = Village::all()->sortBy('name');\n+\n+        $users = User::all();\n+\n+        return view('livewire.users-edit-page',[\n+            'states' => $states,\n+            'cities' => $cities,\n+            'districts' => $districts,\n+            'villages' => $villages,\n+            'users' => $users,\n+            'kab' => $kab,\n+            'kec' => $kec,\n+            'desa' => $desa,\n+        ]);\n     }\n }\n"
                },
                {
                    "date": 1733934770524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n         }\n     }\n \n     // update user\n-    public function updateMyAccount()\n+    public function userEdit()\n     {\n         $this->validate([\n             'name' => 'required|max:255',\n             'phone' => 'required|max:255',\n"
                },
                {
                    "date": 1733935635169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,32 +30,8 @@\n     public $village;\n     public $street_address;\n     public $zip_code;\n \n-    public function mount()\n-    {\n-\n-        $this->name = User::where('id', auth()->user()->id)->value('name');\n-        $this->phone = User::where('id', auth()->user()->id)->value('phone');\n-        $this->email = User::where('id', auth()->user()->id)->value('email');\n-\n-        $this->street_address = User::where('id', auth()->user()->id)->value('street_address');\n-        $this->zip_code = User::where('id', auth()->user()->id)->value('zip_code');\n-\n-        if (auth()->user()->village != '') {\n-            $this->village = auth()->user()->village;\n-        }\n-        if (auth()->user()->district != '') {\n-            $this->district = auth()->user()->district;\n-        }\n-        if (auth()->user()->city != '') {\n-            $this->city = auth()->user()->city;\n-        }\n-        if (auth()->user()->state != '') {\n-            $this->state = auth()->user()->state;\n-        }\n-    }\n-\n     // update user\n     public function userEdit()\n     {\n         $this->validate([\n"
                },
                {
                    "date": 1733935680229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,23 +79,17 @@\n     }\n \n     public function render()\n     {\n-        $states = Province::all();\n-        $cities = City::all()->where('province_code', $this->state)->sortByDesc('name');\n-        $districts = District::all()->where('city_code', $this->city)->sortBy('name');\n-        $villages = Village::all()->where('district_code', $this->district)->sortBy('name');\n+        \n         $kab = City::all()->sortByDesc('name');\n         $kec = District::all()->sortBy('name');\n         $desa = Village::all()->sortBy('name');\n \n         $users = User::all();\n \n         return view('livewire.users-edit-page', [\n-            'states' => $states,\n-            'cities' => $cities,\n-            'districts' => $districts,\n-            'villages' => $villages,\n+            \n             'users' => $users,\n             'kab' => $kab,\n             'kec' => $kec,\n             'desa' => $desa,\n"
                },
                {
                    "date": 1733935701758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,17 +79,23 @@\n     }\n \n     public function render()\n     {\n-\n+        $states = Province::all();\n+        $cities = City::all()->where('province_code', $this->state)->sortByDesc('name');\n+        $districts = District::all()->where('city_code', $this->city)->sortBy('name');\n+        $villages = Village::all()->where('district_code', $this->district)->sortBy('name');\n         $kab = City::all()->sortByDesc('name');\n         $kec = District::all()->sortBy('name');\n         $desa = Village::all()->sortBy('name');\n \n         $users = User::all();\n \n         return view('livewire.users-edit-page', [\n-\n+            'states' => $states,\n+            'cities' => $cities,\n+            'districts' => $districts,\n+            'villages' => $villages,\n             'users' => $users,\n             'kab' => $kab,\n             'kec' => $kec,\n             'desa' => $desa,\n"
                }
            ],
            "date": 1733933994656,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Livewire;\n\nuse App\\Models\\User;\nuse Livewire\\Component;\n\nclass UsersEditPage extends Component\n{\n    use LivewireAlert;\n\n    #[Url()]\n    public $name;\n    #[Url()]\n    public $phone;\n    #[Url()]\n    public $email;\n    public $password = '';\n\n    public $state;\n    public $city;\n    public $district;\n    public $village;\n    public $street_address;\n    public $zip_code;\n\n    public function mount()\n    {\n\n        $this->name = User::where('id', auth()->user()->id)->value('name');\n        $this->phone = User::where('id', auth()->user()->id)->value('phone');\n        $this->email = User::where('id', auth()->user()->id)->value('email');\n\n        $this->street_address = User::where('id', auth()->user()->id)->value('street_address');\n        $this->zip_code = User::where('id', auth()->user()->id)->value('zip_code');\n\n        if (auth()->user()->village != '') {\n            $this->village = auth()->user()->village;\n        }\n        if (auth()->user()->district != '') {\n            $this->district = auth()->user()->district;\n        }\n        if (auth()->user()->city != '') {\n            $this->city = auth()->user()->city;\n        }\n        if (auth()->user()->state != '') {\n            $this->state = auth()->user()->state;\n        }\n    }\n\n    // update user\n    public function updateMyAccount()\n    {\n        $this->validate([\n            'name' => 'required|max:255',\n            'phone' => 'required|max:255',\n            'state' => 'required|max:255',\n            'city' => 'required|max:255',\n            'district' => 'required|max:255',\n            'village' => 'required|max:255',\n            'street_address' => 'required|max:255',\n        ]);\n\n        $data = User::where('id', auth()->user()->id);\n        if ($this->password != '') {\n            $validate = [\n                'name' => $this->name,\n                'phone' => $this->phone,\n                'password' => Hash::make($this->password),\n                'state' => $this->state,\n                'city' => $this->city,\n                'district' => $this->district,\n                'village' => $this->village,\n                'street_address' => $this->street_address,\n                'zip_code' => $this->zip_code,\n            ];\n        } else {\n            $validate = [\n                'name' => $this->name,\n                'phone' => $this->phone,\n                'state' => $this->state,\n                'city' => $this->city,\n                'district' => $this->district,\n                'village' => $this->village,\n                'street_address' => $this->street_address,\n                'zip_code' => $this->zip_code,\n            ];\n        }\n        $data->update($validate);\n\n        $this->alert('success', 'Data Updated!', [\n            'position' => 'top',\n            'timer' => 3000,\n            'toast' => true,\n        ]);\n    }\n\n    public function render()\n    {\n        return view('livewire.users-edit-page');\n    }\n}\n"
        }
    ]
}